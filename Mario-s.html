<html>
	<head>
		<title>Mario</title>
		<script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
		<script type="text/processing" data-processing-target="mycanvas">

      //Fixed variables
      SkyLine sl = new SkyLine();

      int WINDOW_WIDTH = 700;
      int WINDOW_HEIGHT = 400;

      int REFRESH_RATE_PER_SECOND = 30;
      Var bg = (0,0,0);

      //runs once at the start of the program

      void setup(){
        size(WINDOW_WIDTH, WINDOW_HEIGHT);
        frameRate(REFRESH_RATE_PER_SECOND);//how often per second the draw function is called
      }

      void draw(){
        background(bg);
        sl.addBuilding();
        sl.drawSkyLine();
				sl.moveSkyLine();
      }

      class SkyLine{
        //attributes
        ArrayList <Building> buildingList;
        var xPos;
        var cbw;
				Building currentBuilding;

        //constructor
        SkyLine(){
          buildingList = new ArrayList <Building>();
          xPos = 0;
          cbw = (int) random (20, 80);
					buildingList.add(new Building(0, cbw));
        }

        void drawSkyLine(){
          //println(buildingList.size());
          for(var i = 0; i < buildingList.size(); i++){
						//println(i);
          	Building building = buildingList.get(i);
						//println("hello");
						//println(building.centerX);
						building.drawBuilding();
						//println(building.centerX+" "+building.centerY);
          }
        }

        void addBuilding(){
          //println("about to add building");
          //println(cbw);
          currentBuilding = new Building (0, cbw);
					println(xPos+" "+cbw);
					if(xPos%(2*cbw)==0){
						buildingList.add(currentBuilding);
					}

          //xPos += cbw;
          //println("added building");
        }

        void moveSkyLine(){
          for(var i = 0; i < buildingList.size(); i++){
            currentBuilding = buildingList.get(i);
            currentBuilding.moveBuilding();
						//println(i);
            xPos += 1;
          }
        }
      }

      class Building{
        //attributes
        var centerX, centerY, bHeight, bWidth, bColor;

        //constructor
        Building(var x, var bw){
          bHeight = random(150, 200);
          bWidth = bw;
          centerX = x;
          centerY = 400-bHeight;
          bColor = color(random(150, 255), random(190, 255), 255);
        }

        void drawBuilding(){
          fill(255);
            rect(centerX, centerY, bWidth, bHeight);
        }

        void moveBuilding(){
          mvBuilding();
        }

        void mvBuilding(){
          centerX += 1;
        }

      }





        </script>
    </head>

    <body>
		<canvas id="mycanvas"></canvas>
	</body>
</html>
